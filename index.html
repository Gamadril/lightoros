<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="Daniel Wiese&#169; aka Gamadril 2020">
<title>Lightoros: Flexible LED engine</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Lightoros: Flexible LED engine</h1>
<div class="details">
<span id="author" class="author">Daniel Wiese&#169; aka Gamadril 2020</span><br>
<span id="revnumber">version 0.1,</span>
<span id="revdate">28.11.2020</span>
<br><span id="revremark">First draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_engine">Engine</a></li>
<li><a href="#_pipes">Pipes</a>
<ul class="sectlevel2">
<li><a href="#_input_pipes">Input Pipes</a></li>
<li><a href="#_output_pipes">Output Pipes</a></li>
</ul>
</li>
<li><a href="#_plugins">Plugins</a>
<ul class="sectlevel2">
<li><a href="#_input">Input</a>
<ul class="sectlevel3">
<li><a href="#_filesystem">Filesystem</a>
<ul class="sectlevel4">
<li><a href="#_tpm2_file">TPM2 File</a></li>
</ul>
</li>
<li><a href="#_grabber">Grabber</a>
<ul class="sectlevel4">
<li><a href="#_framebuffer_grabber">Framebuffer Grabber</a></li>
<li><a href="#_x11_grabber">X11 Grabber</a></li>
<li><a href="#_macos_screen_grabber">MacOS Screen Grabber</a></li>
<li><a href="#_remote_tcp_grabber">Remote TCP Grabber</a></li>
<li><a href="#_remote_named_pipe_grabber">Remote Named Pipe Grabber</a></li>
<li><a href="#_remote_unix_socket_grabber">Remote Unix Socket Grabber</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_output">Output</a>
<ul class="sectlevel3">
<li><a href="#_file_system">File System</a>
<ul class="sectlevel4">
<li><a href="#_filesystem_pipe">Filesystem Pipe</a></li>
</ul>
</li>
<li><a href="#_network">Network</a>
<ul class="sectlevel4">
<li><a href="#_udp_tpm2">UDP TPM2</a></li>
</ul>
</li>
<li><a href="#_serial_port">Serial Port</a>
<ul class="sectlevel4">
<li><a href="#_serial_tpm2">Serial TPM2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_transform">Transform</a>
<ul class="sectlevel3">
<li><a href="#_convert">Convert</a>
<ul class="sectlevel4">
<li><a href="#_rectangle_converter">Rectangle Converter</a></li>
<li><a href="#_reverse_converter">Reverse Converter</a></li>
<li><a href="#_shift_converter">Shift Converter</a></li>
</ul>
</li>
<li><a href="#_crop">Crop</a>
<ul class="sectlevel4">
<li><a href="#_crop_image_black_border">Crop Image Black Border</a></li>
<li><a href="#_crop_image_fixed_values">Crop Image Fixed Values</a></li>
</ul>
</li>
<li><a href="#_resize">Resize</a>
<ul class="sectlevel4">
<li><a href="#_resize_image">Resize Image</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_for_developers">For developers</a>
<ul class="sectlevel2">
<li><a href="#_remote_grabber">Remote grabber</a>
<ul class="sectlevel3">
<li><a href="#_protocol">Protocol</a>
<ul class="sectlevel4">
<li><a href="#_frame_content">Frame Content</a></li>
<li><a href="#_size_control_command">Size Control Command</a></li>
<li><a href="#_name_control_command">Name Control Command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_engine">Engine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lightoros engine handles messages coming from the input pipes and pass them to the output pipes.
The connection for input data is of type N:1 - several input pipes use the same channel to send their data to the engine.
If data is coming from several input pipes at the same time, the priority level of the pipe defines the processing order.
The engine forwards it to output plugins.
The engine works with RGB color order.
An image has it&#8217;s origin at the top left corner.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pipes">Pipes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lightoros engine works with pipes to get data from some kind of input and forwards it to other components acting as output.
According to the functionality they are called <a href="#_input_pipes">Input Pipes</a> and <a href="#_output_pipes">Output Pipes</a>.
The lightoros engine can handle several input pipes and send received data to several output pipes.
In that case all output pipes will get the same data.</p>
</div>
<div class="sect2">
<h3 id="_input_pipes">Input Pipes</h3>
<div class="paragraph">
<p>An input pipe has exactly one input source (<a href="#_input">Input</a>) as first member of the pipe and might have optional members for modifing data (<a href="#_transform">Transform</a>) before passing it to the engine.
For example when using lightoros for an ambilight installation it makes sense to resize an image created by the screen grabber to reduce the data size before passing it to the engine.
Each input pipe runs in its own thread.</p>
</div>
</div>
<div class="sect2">
<h3 id="_output_pipes">Output Pipes</h3>
<div class="paragraph">
<p>An output pipe has exactly one output plugin as last member of the pipe and might also have optional members for modifing data (<a href="#_transform">Transform</a>) before the output plugin consumes it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugins">Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The full power of the lightoros system is provided by different plugins.
There are 3 types of plugins: <a href="#_input">Input</a>, <a href="#_output">Output</a> and <a href="#_transform">Transform</a>.
Below is the list of currently available plugins.</p>
</div>
<div class="sect2">
<h3 id="_input">Input</h3>
<div class="paragraph">
<p>Input plugins are responsible for providing some usefull data.
In most cases it&#8217;s some kind of RGB data.
Input plugins are always the first member of an input pipe.</p>
</div>
<div class="sect3">
<h4 id="_filesystem">Filesystem</h4>
<div class="paragraph">
<p>Filesystem plugins produce their data based on file content.</p>
</div>
<div class="sect4">
<h5 id="_tpm2_file">TPM2 File</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>FilesystemInputTPM2</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    files: array[string],
    repeat: boolean,
    delay_frame: number,
    delay_file: number
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Reads RGB data out of TPM2 files.
<code>files</code> config parameter provides the list of absolute paths.
If <code>repeat</code> is set to <code>true</code> the files will be played in a loop.
With the <code>delay_frame</code> parameter you can specify a delay in milliseconds between the single TPM2 frames.
<code>delay_file</code> parameter is used for a delay between the files in the list.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_grabber">Grabber</h4>
<div class="paragraph">
<p>Grabber plugins create RGB data out of some video source.</p>
</div>
<div class="sect4">
<h5 id="_framebuffer_grabber">Framebuffer Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>FramebufferScreenGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    path: string,
    delay_frame: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from a linux framebuffer.
The <code>path</code> parameter provides the path to the framebuffer device (e.g. <code>/dev/fb0</code>).
The <code>delay_frame</code> parameter configures the time to wait before grabbing the next frame.
Too small values may directyl affect the CPU usage.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_x11_grabber">X11 Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>X11ScreenGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    delay_frame: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from the X11 server.
The <code>delay_frame</code> parameter configures the time to wait before grabbing the next frame.
Too small values may directyl affect the CPU usage.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_macos_screen_grabber">MacOS Screen Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>OsxScreenGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    screen_index: integer,
    delay_frame: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from the MacOS screen/display.
If you have several displays connected to your mac, provide the screen that should be grabbed using <code>screen_index</code> config parameter.
The <code>delay_frame</code> parameter configures the time to wait before grabbing the next frame.
Too small values may directyl affect the CPU usage.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_remote_tcp_grabber">Remote TCP Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>RemoteScreenTcpGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    client_name: string,
    address: string,
    port: integer,
    width: integer,
    height: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from a remote grabber over network.
The plugin acts as a TCP client and tries to connect to the remote screen grabber using <code>address</code> and <code>port</code> config parameters.
After establishing a connection the plugin will send the <code>client_name</code> parameter to identify itself.
The plugin also sends the parameters <code>width</code> and <code>height</code> to tell the server the resolution of the target image it would like to receive.
This will reduce the size of transfered data over the network.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_remote_named_pipe_grabber">Remote Named Pipe Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>RemoteScreenPipeGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    path: string,
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from a remote grabber on the same host using a named pipe.
The plugin acts as a pipe reader using the <code>path</code> config parameter.
Because a named pipe is unidirectional the plugin is only getting data and not sending any information to the grabber.
This plugin is useful when embedding the lightoros engine in an android app.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_remote_unix_socket_grabber">Remote Unix Socket Grabber</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>RemoteScreenUnixSocketGrabberInput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    client_name: string,
    path: string,
    width: integer,
    height: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Gets its screen data from a remote grabber on the same host using a unix socket.
The plugin acts as a unix socket client and tries to connect to the screen grabber using the <code>path</code> config parameters.
After establishing a connection the plugin will send the <code>client_name</code> parameter to identify itself.
The plugin also sends the parameters <code>width</code> and <code>height</code> to tell the server the resolution of the target image.
This plugin was created after tring to port the whole lightoros engine to android OS.
Android has a framebuffer device, but user applications do not have direct access to it.
The same restriction exists for tcp communication from the native code - access denied when opening tcp socket to the remote android grabber from rust code.
The next idea was to use unix sockets with abstract addresses, so this plugin was born.
However unix sockets on android are problematic, too - so at the end it didn&#8217;t work either.
This means that plugin "should work", but was never tested.
The solution for android was at the end using "named pipes"</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_output">Output</h3>
<div class="paragraph">
<p>Output plugins are responsible for consuming processed RGB data.
It could be a LED stripe, a file or something else.
Output plugins are always at the last place in an output pipe.</p>
</div>
<div class="sect3">
<h4 id="_file_system">File System</h4>
<div class="paragraph">
<p>File System plugins write the RGB data to file system.</p>
</div>
<div class="sect4">
<h5 id="_filesystem_pipe">Filesystem Pipe</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>FilesystemPipeOutput</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    path: string,
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Writes the RGB data to file system using the <code>path</code> parameter.
No additianal headers are added to the output.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_network">Network</h4>
<div class="paragraph">
<p>Network plugins send the RGB data over a network.</p>
</div>
<div class="sect4">
<h5 id="_udp_tpm2">UDP TPM2</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>NetUdpOutputTPM2</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    ip: string,
    port: integer,
    max_packet_length: integer,
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Sends the RGB data over UDP socket using the TPM2 protocol.
System dependent there might be a restriction for the size of a single UDP packet.
<code>max_packet_length</code> is used to define the max possible size of a single UDP packet.
The plugin will split RGB data if necessary to several UDP packets and use TPM.net protocol.
However there is no guarantee for the order of the UDP packets, especially not in a network with a router.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_serial_port">Serial Port</h4>
<div class="paragraph">
<p>Serial port plugins send the RGB data over a serial port.</p>
</div>
<div class="sect4">
<h5 id="_serial_tpm2">Serial TPM2</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>SerialOutputTPM2</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    port: string
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Sends RGB data over serial port using the TPM2 protocol.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_transform">Transform</h3>
<div class="paragraph">
<p>Transformation plugins are responsible for modifying RGB data.
In most cases they do only one simple job and are chained together to do some complex transformations.
For example one plugin can resize an image passing the result to the next plugin which will detect and crop black borders.
Transform plugins are separated in groups which describe their main task.</p>
</div>
<div class="sect3">
<h4 id="_convert">Convert</h4>
<div class="paragraph">
<p>Converter plugins transform RGB data from one type/presentation to another.</p>
</div>
<div class="sect4">
<h5 id="_rectangle_converter">Rectangle Converter</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>ConvertRectangleTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    drop_corners: boolean
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Converts an image to a rectangle by taking only most left/right/top/bottom values of an image starting at the top left corner clockwise.
If `drop_corners`is set to true, the first and last values of the lines are ignored.
This plugin is mainly used for an ambilight installation around/behind a display.</p>
</dd>
</dl>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_resize.png" alt="screen resize" width="400">
</div>
<div class="title">Output of conversion with <code>drop_corners = false</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_corners.png" alt="screen corners" width="400">
</div>
</div>
</div>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_resize.png" alt="screen resize" width="400">
</div>
<div class="title">Output of conversion with <code>drop_corners = true</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_drop_corners.png" alt="screen drop corners" width="400">
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Numbers show the index of RGB values in the output data.</p>
</div>
</div>
<div class="sect4">
<h5 id="_reverse_converter">Reverse Converter</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>ConvertReverseTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    keep_first: boolean
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Reverses the order of elements.
This plugin is mainly used to change the direction of LED data for an ambilight installation.
If <code>keep_first</code> is set to true, the first value of input data is kept at it&#8217;s position.</p>
</dd>
</dl>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_corners.png" alt="screen corners" width="400">
</div>
<div class="title">Output of conversion with <code>keep_first = false</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_reverse.png" alt="screen reverse" width="400">
</div>
</div>
</div>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_corners.png" alt="screen corners" width="400">
</div>
<div class="title">Output of conversion with <code>keep_first = true</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_reverse_fixed_first.png" alt="screen reverse fixed first" width="400">
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Numbers show the index of RGB values in the output data.</p>
</div>
</div>
<div class="sect4">
<h5 id="_shift_converter">Shift Converter</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>ConvertShiftTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    amount: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Handles the input data as ring buffer. All elements are shifted to the right (clockwise) by the number of positions specified by the <code>amount</code> parameter.
If the value of <code>amount</code> is negative, elements will be shifted to the left (anti-clockwise).
This plugin is mainly used to rotate elements in the data buffer to fit the start position of the LED stripe in an ambilight installation.</p>
</dd>
</dl>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_corners.png" alt="screen corners" width="400">
</div>
<div class="title">Output of conversion with <code>amount = 2</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_shift_2.png" alt="screen shift 2" width="400">
</div>
</div>
</div>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/screen_corners.png" alt="screen corners" width="400">
</div>
<div class="title">Output of conversion with <code>amount = -2</code></div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/screen_shift_-2.png" alt="screen shift  2" width="400">
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Numbers show the index of RGB values in the output data.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_crop">Crop</h4>
<div class="paragraph">
<p>Crop plugins modify RGB data by removing some parts of it.</p>
</div>
<div class="sect4">
<h5 id="_crop_image_black_border">Crop Image Black Border</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>CropImageBlackBorderTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    threshold: integer(0-255)
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Detects the black borders in an image and crops them.
The <code>threshold</code> value effects the decision if a color value is handled as black or not.
0 means only really black RGB values (0,0,0) will be considered.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_crop_image_fixed_values">Crop Image Fixed Values</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>CropImageFixedTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    top: integer,
    right: integer,
    bottom: integer,
    left: integer
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Crops an image based on the fixed config values.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resize">Resize</h4>
<div class="paragraph">
<p>Resize plugins modify the size of the object represented by RGB data.</p>
</div>
<div class="sect4">
<h5 id="_resize_image">Resize Image</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Kind</dt>
<dd>
<p><code>ResizeImageTransform</code></p>
</dd>
<dt class="hdlist1">Config</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    width: integer,
    height: integer,
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Resizes the image represented by the RGB data from the input to the resolution provided in the config values.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/screen_resize.png" alt="Resized" width="400">
</div>
<div class="title">Resized image</div>
</div>
<div class="paragraph">
<p>Numbers show the index of RGB values in the output data.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_for_developers">For developers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some useful information for plugin development.</p>
</div>
<div class="sect2">
<h3 id="_remote_grabber">Remote grabber</h3>
<div class="paragraph">
<p>Remote grabbers are separate application/processes running outside the lightoros engine.
They are responsible for grabbing frames from a video source and sending them to the engine.
There are two types of remote grabbers: <code>Unidirectional</code> and <code>Bidirectional</code>.
Bidirectional grabbers are using a two-way communication channel.
They not only send frame data to the engine, but also receive commands from it.
Unidirectional grabbers are using a one-way communication channel - they can only send data to the engine.</p>
</div>
<div class="sect3">
<h4 id="_protocol">Protocol</h4>
<div class="sect4">
<h5 id="_frame_content">Frame Content</h5>
<div class="paragraph">
<p>Each data packet contains additional information about data length and the resolution of the frame.
It starts with the data length (not packet length) followed by the width and height of the frame and the frame data itslef.
Frame data is sent in RGB format using 24 bits per value.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Frame data packet format</caption>
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 63.6364%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Block</th>
<th class="tableblock halign-left valign-top">Size</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the data packet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frame width</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Width of the screen frame</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frame height</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Height of the screen frame</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frame content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw frame RGB data, 1 byte per color.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>Packet length = sizeof(Frame content) + 8</code></p>
</div>
<div class="paragraph">
<p>All values have Big Endian byte order.</p>
</div>
</div>
<div class="sect4">
<h5 id="_size_control_command">Size Control Command</h5>
<div class="paragraph">
<p>The engine can tell the grabber the frame resolution it should send to the engine.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Size control command packet format</caption>
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 63.6364%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Block</th>
<th class="tableblock halign-left valign-top">Size</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the command data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x10 for size control command</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frame width</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Width of the screen frame</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frame height</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Height of the screen frame</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_name_control_command">Name Control Command</h5>
<div class="paragraph">
<p>The engine can tell the grabber the name of the engine.
It might be used by the grabber to show the user the name of the connected engine.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Name control command packet format</caption>
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 63.6364%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Block</th>
<th class="tableblock halign-left valign-top">Size</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Packet length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the command data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x20 for name control command</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the client UTF-8 encoded</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.1<br>
Last updated 2021-01-12 01:02:45 UTC
</div>
</div>
</body>
</html>